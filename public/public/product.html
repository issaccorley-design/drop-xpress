<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PRODUCT | HUNTX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.ico">
</head>

<body>

<header>
  <h1>HUNTX</h1>
  <nav>
    <a href="index.html">HOME</a>
    <a href="shop.html">ARMORY</a>
    <a href="cart.html">LOADOUT (<span id="cart-count">0</span>)</a>
  </nav>
</header>

<div class="container">

  <div class="glass" id="product-container" style="display:grid; gap:3rem;"></div>

</div>

<footer>
  © 2025 HUNTX
</footer>

<script src="products.js"></script>
<script src="script.js"></script>

<script>
/* ──────────────────────────────────────────────
   LOAD PRODUCT FROM URL
   ────────────────────────────────────────────── */
const params = new URLSearchParams(window.location.search);
const id = parseInt(params.get("id"));
const product = products.find(p => p.id === id);

if (!product) {
  document.getElementById("product-container").innerHTML =
    "<h2>Product not found</h2>";
} else {
  document.getElementById("product-container").innerHTML = `
    <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:3rem;">

      <!-- IMAGES -->
      <div>
        <img src="${product.image}" style="width:100%; border-radius:24px;">
      </div>

      <!-- INFO -->
      <div>
        <h2 style="font-size:3.5rem;">${product.name}</h2>
        <p class="brand">${product.brand || "HUNTX"}</p>
        <div class="price-tag">$${product.price.toLocaleString()}</div>

        <p style="font-size:1.6rem; margin:2rem 0;">
          ${product.description}
        </p>

        <button id="add-to-cart-btn" class="btn">ADD TO LOADOUT</button>
      </div>

    </div>

    <!-- REVIEWS -->
    <div style="margin-top:4rem;">
      <h3>Customer Reviews</h3>

      <div id="reviews" style="margin:2rem 0;"></div>

      <div class="glass" style="margin-top:2rem;">
        <select id="rating" class="input">
          <option value="5">★★★★★</option>
          <option value="4">★★★★☆</option>
          <option value="3">★★★☆☆</option>
          <option value="2">★★☆☆☆</option>
          <option value="1">★☆☆☆☆</option>
        </select>

        <textarea id="reviewText" class="input" placeholder="Write your review..."></textarea>

        <button class="btn" onclick="submitReview()">SUBMIT REVIEW</button>
      </div>
    </div>
  `;
  loadReviews();

  // Add to cart handler
  document.getElementById("add-to-cart-btn")?.addEventListener("click", function() {
    addToCart(id);

    const btn = this;
    btn.textContent = "ADDED!";
    btn.disabled = true;

    setTimeout(() => {
      btn.textContent = "ADD TO LOADOUT";
      btn.disabled = false;
    }, 2000);
  });
}

/* ──────────────────────────────────────────────
   REVIEWS (localStorage)
   ────────────────────────────────────────────── */
function loadReviews() {
  const reviews = JSON.parse(localStorage.getItem(`reviews_${id}`) || "[]");
  const el = document.getElementById("reviews");

  if (reviews.length === 0) {
    el.innerHTML = "<p>No reviews yet.</p>";
    return;
  }

  el.innerHTML = reviews.map(r => `
    <div class="glass" style="margin-bottom:1rem;">
      <div style="color:#ff6b00;font-size:1.4rem;">
        ${"★".repeat(r.rating)}
      </div>
      <p>${r.text}</p>
    </div>
  `).join("");
}

function submitReview() {
  const rating = document.getElementById("rating").value;
  const text = document.getElementById("reviewText").value.trim();
  if (!text) return;

  const key = `reviews_${id}`;
  const reviews = JSON.parse(localStorage.getItem(key) || "[]");
  reviews.push({ rating, text });
  localStorage.setItem(key, JSON.stringify(reviews));

  document.getElementById("reviewText").value = "";
  loadReviews();
}

function getCart() {
  return JSON.parse(localStorage.getItem("cart") || "[]");
}

function saveCart(cart) {
  localStorage.setItem("cart", JSON.stringify(cart));
}

function updateCartCount() {
  const count = getCart().reduce((sum, item) => sum + item.quantity, 0);
  document.querySelectorAll("#cart-count").forEach(el => el.textContent = count);
}

function calculateItemPrice(item) {
  return item.salePrice && item.salePrice < item.price ? item.salePrice : item.price;
}
</script>

</body>
<footer style="background:rgba(10,10,30,0.9); padding:3rem 5%; text-align:center; border-top:1px solid #ff6b00; margin-top:4rem;">
  <div class="trust-badges" style="display:flex; justify-content:center; gap:2rem; flex-wrap:wrap; margin-bottom:2rem;">
    <!-- Replace src with your hosted images or free CDN links -->
    <img src="https://trustlock.co/wp-content/uploads/2019/01/ssl-secure-checkout-trust-badge-icon.png" alt="SSL Secure" width="140" loading="lazy">
    <img src="https://tse3.mm.bing.net/th/id/OIP.S8wuoyNOknSddf2ZACZeBAHaB5?pid=Api&P=0&h=220" alt="Powered by Stripe" width="120" loading="lazy">
    <span style="font-size:1.4rem; color:#ff6b00; align-self:center;">30-Day Returns • Secure Payments</span>
  </div>

  <p style="font-size:1.3rem; margin:1rem 0;">
    © 2026 HUNTX | Newport, Tennessee
  </p>

  <p style="font-size:1.2rem; opacity:0.9;">
    <a href="privacy.html" style="color:#ff6b00; margin:0 1rem;">Privacy Policy</a> |
    <a href="terms.html" style="color:#ff6b00; margin:0 1rem;">Terms of Service</a> |
    <a href="returns.html" style="color:#ff6b00; margin:0 1rem;">Returns & Refunds</a> |
    <a href="contact.html" style="color:#ff6b00; margin:0 1rem;">Contact Us</a>
  </p>

  <div style="margin-top:1.5rem;">
    <a href="https://www.instagram.com/huntx.co" target="_blank" style="color:#ff6b00; font-size:1.8rem; margin:0 1rem;"><i class="fab fa-instagram"></i></a>
    <a href="https://x.com/huntxgear" target="_blank" style="color:#ff6b00; font-size:1.8rem; margin:0 1rem;"><i class="fab fa-x-twitter"></i></a>
    <!-- Add YouTube/TikTok if active -->
  </div>

  <p style="margin-top:2rem; font-size:1.1rem; opacity:0.7;">Elite gear for extreme hunts and frontier missions. Built in the USA.</p>
</footer>
</html>